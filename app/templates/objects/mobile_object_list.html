{% extends "main/mobile_layout_bootstrap.html" %}

{% block title %}Объекты{% endblock %}
{% block mobile_title %}Объекты{% endblock %}

{% block mobile_header_actions %}
{% if current_user.role in ['Инженер ПТО', 'Зам. директор', 'Ген. директор'] %}
<button class="mobile-header-btn" onclick="window.location.href='{{ url_for('objects.add_object') }}'" title="Добавить объект">
    <svg fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
    </svg>
</button>
{% endif %}
{% endblock %}

{% block content %}
<div class="mobile-mb-3">
    <h2 class="mobile-card-title mobile-text-center">Список объектов</h2>
    <p class="mobile-text-muted mobile-text-center">Выберите объект для просмотра деталей</p>
</div>

{% if objects %}
    {% for obj in objects %}
    <div class="mobile-card" onclick="window.location.href='{{ url_for('objects.object_detail', object_id=obj.id) }}'">
        <div class="mobile-card-title">{{ obj.name }}</div>
        <div class="mobile-card-text mobile-mb-2">
            <strong>Статус:</strong> 
            <span class="badge bg-{{ 'success' if obj.status == 'Активный' else 'secondary' }}">
                {{ obj.status or 'Не указан' }}
            </span>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="mobile-card mobile-text-center">
        <div class="mobile-card-title">Объекты не найдены</div>
        <div class="mobile-card-text">В системе пока нет объектов</div>
    </div>
{% endif %}

{% endblock %}
