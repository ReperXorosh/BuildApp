{% extends "main/mobile_layout_bootstrap.html" %}
{% set active_page = 'objects' %}

{% block title %}Объект: {{ object.name }}{% endblock %}
{% block mobile_title %}{{ object.name }}{% endblock %}

{% block content %}
<div class="mobile-card">
    <div class="mobile-card-title">Информация</div>
    <div class="mobile-card-text"><strong>Название:</strong> {{ object.name }}</div>
    {% if object.location %}
    <div class="mobile-card-text"><strong>Адрес:</strong> {{ object.location }}</div>
    {% endif %}
    {% if object.description %}
    <div class="mobile-card-text"><strong>Описание:</strong> {{ object.description }}</div>
    {% endif %}
</div>

<div class="mobile-card">
    <div class="mobile-card-title">Действия</div>
    <div class="d-flex gap-2 flex-wrap">
        <a href="{{ url_for('objects.supports_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill">Опоры</a>
        <a href="{{ url_for('objects.trenches_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill">Траншеи</a>
        <a href="{{ url_for('objects.reports_list', object_id=object.id) }}" class="btn btn-outline-secondary flex-fill">Отчёты</a>
        <a href="{{ url_for('objects.planned_works_list', object_id=object.id) }}" class="btn btn-outline-secondary flex-fill">Работы</a>
    </div>
    <a href="{{ url_for('objects.object_list') }}" class="mobile-btn mobile-btn-outline mobile-mt-2">Назад к списку</a>
</div>

<!-- Дополнительный отступ, чтобы контент не перекрывался нижней панелью навигации -->
<div style="height: 140px"></div>

<script>
// Гарантируем применение сохранённой темы и плавный скролл
document.addEventListener('DOMContentLoaded', function() {
    try {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark' || savedTheme === 'light') {
            document.documentElement.setAttribute('data-bs-theme', savedTheme);
        }
        // Добавочный safeguard для скроллинга
        const content = document.querySelector('.mobile-content');
        if (content) {
            content.style.webkitOverflowScrolling = 'touch';
            content.style.scrollBehavior = 'smooth';
            // На всякий случай усилим нижний внутренний отступ
            const currentPaddingBottom = parseInt(window.getComputedStyle(content).paddingBottom || '0', 10);
            if (currentPaddingBottom < 140) {
                content.style.paddingBottom = '140px';
            }
        }
    } catch (e) { /* noop */ }
});
</script>
{% endblock %}


