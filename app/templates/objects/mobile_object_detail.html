{% extends "main/mobile_layout_bootstrap.html" %}
{% set active_page = 'objects' %}

{% block title %}Объект: {{ object.name }}{% endblock %}
{% block mobile_title %}{{ object.name }}{% endblock %}

{% block content %}
<div class="mobile-card">
    <div class="mobile-card-title">Информация</div>
    <div class="mobile-card-text"><strong>Название:</strong> {{ object.name }}</div>
    {% if object.location %}
    <div class="mobile-card-text"><strong>Адрес:</strong> {{ object.location }}</div>
    {% endif %}
    {% if object.description %}
    <div class="mobile-card-text"><strong>Описание:</strong> {{ object.description }}</div>
    {% endif %}
</div>

<div class="mobile-card">
    <div class="mobile-card-title">Действия</div>
    <div class="d-flex gap-2 flex-wrap">
        <a href="{{ url_for('objects.supports_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill mobile-action-btn">Опоры</a>
        <a href="{{ url_for('objects.trenches_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill mobile-action-btn">Траншеи</a>
        <a href="{{ url_for('objects.reports_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill mobile-action-btn">Отчёты</a>
        <a href="{{ url_for('objects.planned_works_list', object_id=object.id) }}" class="btn btn-outline-primary flex-fill mobile-action-btn">Работы</a>
    </div>
    {# Кнопка назад скрыта для мобильной версии. Навигация назад осуществляется стрелкой в шапке. #}
</div>

<!-- Дополнительный отступ, чтобы контент не перекрывался нижней панелью навигации -->
<div style="height: 140px"></div>

<script>
// Плавный скролл (тема уже инициализирована в layout)
document.addEventListener('DOMContentLoaded', function() {
    // Добавочный safeguard для скроллинга
        const content = document.querySelector('.mobile-content');
        if (content) {
            content.style.webkitOverflowScrolling = 'touch';
            content.style.scrollBehavior = 'smooth';
            // На всякий случай усилим нижний внутренний отступ
            const currentPaddingBottom = parseInt(window.getComputedStyle(content).paddingBottom || '0', 10);
            if (currentPaddingBottom < 140) {
                content.style.paddingBottom = '140px';
            }
        }
    } catch (e) { /* noop */ }
});
</script>
<style>
/* Аккуратные контрастные outline-кнопки для обеих тем */
.mobile-action-btn {
    min-height: 44px;
    font-weight: 600;
    border-radius: 12px;
    padding: 10px 14px;
}
.btn-outline-primary.mobile-action-btn {
    color: var(--bs-primary) !important;
    border-width: 2px !important;
}
.btn-outline-primary.mobile-action-btn:hover {
    color: #fff !important;
    background-color: var(--bs-primary) !important;
    border-color: var(--bs-primary) !important;
}
[data-bs-theme="dark"] .btn-outline-primary.mobile-action-btn {
    color: #64a3ff !important;
    border-color: #2b69d7 !important;
}
[data-bs-theme="dark"] .btn-outline-primary.mobile-action-btn:hover {
    background-color: #2b69d7 !important;
    border-color: #2b69d7 !important;
    color: #fff !important;
}
</style>
{% endblock %}


